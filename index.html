<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë‹¨ì–´ì¥</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      font-size: 0.95em;
    }

    input, button {
      font-size: 0.95em;
      width: 100%;
      margin-top: 8px;
      padding: 8px;
      box-sizing: border-box;
    }

    button {
      cursor: pointer;
    }

    #startBtn {
      background-color: #fddde6; /* ì—°í•œ í•‘í¬ */
      border: 1px solid #fcbecf;
    }

    .hidden {
      display: none;
    }

    .result {
      margin-top: 12px;
      font-weight: bold;
    }

  </style>
  
</head>
<body>

  <body>

    <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
      <h1 style="margin: 0; font-size: 1.5em;">ë‹¨ì–´ ì‹œí—˜ ì›¹ì•±</h1>
      <button id="addBtn" onclick="toggleWordForm()" style="
        font-size: 0.75em;
        width: 80px;
        padding: 4px 6px;
        height: 30px;
      ">â• ë‹¨ì–´ ì¶”ê°€</button>
      
    </div>
    

    <!-- ë©”ì¸ í™”ë©´ (ì‹œí—˜ ì‹œì‘ / ë‹¨ì–´ ì¶”ê°€ ë²„íŠ¼) -->
    <div id="wordManager">
      <button id="startBtn" onclick="startQuiz()" style="height:65px">ğŸ“– ì‹œí—˜ ì‹œì‘</button>
      
      <p>í˜„ì¬ ë“±ë¡ëœ ë‹¨ì–´ ìˆ˜: <span id="wordCount">0</span></p>
    </div>
    
    <!-- ë‹¨ì–´ ì¶”ê°€ ì…ë ¥ì°½ (ì²˜ìŒì—” ìˆ¨ê¹€) -->
    <div id="wordForm" class="hidden">
      <input type="text" id="newKorean" placeholder="ëœ» (ì˜ˆ: ì‚¬ê³¼)" />
      <input type="text" id="newEnglish" placeholder="ì˜ì–´ (ì˜ˆ: apple)" />
      <button onclick="addWord()">ì¶”ê°€</button>
    </div>
  
    <!-- í€´ì¦ˆ ì˜ì—­ -->
    <div id="quiz-section" class="hidden">
      <p id="question"></p>
      <input type="text" id="answer" placeholder="ì •ë‹µ ì…ë ¥" />
      <button onclick="checkAnswer()">ì œì¶œ</button>
      <div id="result" class="result"></div>
    </div>
  
    <!-- ê²°ê³¼ ì˜ì—­ -->
    <div id="result-section" class="hidden">
      <h2>ì‹œí—˜ ê²°ê³¼</h2>
      <p id="score"></p>
      <p id="wrongCount"></p>
      <h3>ì˜¤ë‹µ ë…¸íŠ¸</h3>
      <ul id="wrongList"></ul>
      <button onclick="restart()">ì²˜ìŒìœ¼ë¡œ</button>
    </div>
  
  <script>
    // ê¸°ë³¸ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ (ì‚¬ìš©ìê°€ ì‚­ì œ ë¶ˆê°€ëŠ¥)
    let defaultWords = [
      { korean: "ì•Œë¦¬ë‹¤,í†µì§€í•˜ë‹¤"  , english: "inform" },
      { korean: "ì¶©ê³ í•˜ë‹¤", english: "advise" },
      { korean: "ë´‰ì‚¬,ì„œë¹„ìŠ¤"   , english: "service" },
      { korean: "ê³µê¸‰í•˜ë‹¤,ì¤€ë¹„í•˜ë‹¤"   , english: "provide" },
      { korean: "ê´€ê³„"  , english: "relationship" },
      { korean: "í–‰ë™í•˜ë‹¤"  , english: "behave" },
      { korean: "í–¥ìƒì‹œí‚¤ë‹¤,í–¥ìƒí•˜ë‹¤"   , english: "improve" },
      { korean: "ê°œì¸ì˜,ê°œì¸,ê°œì¸ì ì¸"  , english: "individual" },
      { korean: "í•„ìš”ë¡œí•˜ë‹¤,ìš”êµ¬í•˜ë‹¤"  , english: "require" },
      { korean: "ê°œë°œí•˜ë‹¤,ë°œë‹¬í•˜ë‹¤"  , english: "develop" },
      { korean: "ì‚¬íšŒì˜"  , english: "social" },
      { korean: "ì´ê³„", english: "amount" },
      { korean: "ê³ ìš©í•˜ë‹¤"   , english: "employee" },
      { korean: "ë”ì°í•Ÿ,ë¬´ì„œìš´"   , english: "terrible" },
      { korean: "íƒœë„,ì…ì¥"  , english: "attitude" },
      { korean: "ì—°êµ¬,ì—°êµ¬í•˜ë‹¤"  , english: "research" },
      { korean: "ì²­ì¤‘,ê´€ê°"   , english: "audience" },
      { korean: "ìì›ë´‰ì‚¬,ìë°œì ìœ¼ë¡œí•˜ë‹¤"  , english: "volunteer" },
      { korean: "ì˜í–¥,ì˜í–¥ì„ë¼ì¹˜ë‹¤"  , english: "influence" },
      { korean: "êµ­ì œì˜,êµ­ì œì ì¸"  , english: "international" },

      { korean: "ê¸°íšŒ"  , english: "oppertunity" },
      { korean: "ëŠ¥ë ¥", english: "ability" },
      { korean: "ë¹„ìš©,ì§€ì¶œ"   , english: "expense" },
      { korean: "í¬í•¨í•˜ë‹¤,ë§ë ¤ë“¤ê²Œí•˜ë‹¤"   , english: "involve" },
      { korean: "ê°•ì¡°,ìŠ¤íŠ¸ë ˆìŠ¤"  , english: "stress" },
      { korean: "ê·¸ëŸ¬ë¯€ë¡œ,ë”°ì„œ,ê·¸ê²°ê³¼"  , english: "therefore" },
      { korean: "í‰ê· ,í‰ê· ì˜"   , english: "average" },
      { korean: "íƒ€ë‹¤,íƒœì›€"  , english: "ride" },
      { korean: "ì§€ë°©ì˜,ì§€ì—­ì˜"  , english: "local" },
      { korean: "ì´‰êµ¬í•˜ë‹¤,ê²©ë ¤í•˜ë‹¤"  , english: "encourage" },
      { korean: "ê²°ì‹¬í•˜ë‹¤,ê²°ì •í•˜ë‹¤"  , english: "determine" },
      { korean: "í¸ì•ˆ,ìœ„ë¡œ", english: "comfort" },
      { korean: "ì†Œë¹„í•˜ë‹¤"   , english: "consume" },
      { korean: "ë¬¼ì²´,ëª©í‘œ,ë°˜ëŒ€í•˜ë‹¤"   , english: "object" },
      { korean: "~ì—ê²Œ ê¹Šì€ ì¸ìƒì„ ì£¼ë‹¤"  , english: "impress" },
      { korean: "ì´ìš©ê°€ëŠ¥í•œ,ì“¸ëª¨ìˆëŠ”"  , english: "avaliable" },
      { korean: "í•¨ìœ í•˜ë‹¤,í¬í•¨í•˜ë‹¤"   , english: "contain" },
      { korean: "ì¸ì§€í•˜ë‹¤,ì¸ì •í•˜ë‹¤"  , english: "recognize" },
      { korean: "ì¬ë£Œ,ë¬¼ì§ˆ,ë¬¼ì§ˆì˜"  , english: "material" },
      { korean: "ê¸ì •ì ì¸,í™•ì‹ ì˜"  , english: "positive" }
    ];

    // ì‚¬ìš©ì ì¶”ê°€ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸
    let userWords = [];

    // í€´ì¦ˆìš©
    let quizList = [];
    let currentIndex = 0;
    let score = 0;
    let wrongAnswers = [];

    document.getElementById("answer").addEventListener("keyup", function(e) {
      if (e.key === "Enter") checkAnswer();
    });

    function updateWordCount() {
      document.getElementById("wordCount").textContent = defaultWords.length + userWords.length;
    }

    function addWord() {
      const korean = document.getElementById("newKorean").value.trim();
      const english = document.getElementById("newEnglish").value.trim().toLowerCase();

      if (!korean || !english) {
        alert("ëœ»ê³¼ ì˜ì–´ ë‹¨ì–´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      userWords.push({ korean, english });
      document.getElementById("newKorean").value = "";
      document.getElementById("newEnglish").value = "";
      updateWordCount();
    }

    function startQuiz() {
      const combinedList = [...defaultWords, ...userWords];
      if (combinedList.length < 1) {
        alert("ë‹¨ì–´ë¥¼ ë¨¼ì € ì¶”ê°€í•´ì£¼ì„¸ìš”!");
        return;
      }

      // í€´ì¦ˆ ì„¸íŒ…
      const shuffled = combinedList.sort(() => 0.5 - Math.random());
      quizList = shuffled.slice(0, 20);
      currentIndex = 0;
      score = 0;
      wrongAnswers = [];

      // UI ì „í™˜
      document.getElementById("wordManager").classList.add("hidden");
      document.getElementById("addBtn").classList.add("hidden");
      document.getElementById("quiz-section").classList.remove("hidden");

      loadQuestion();
    }


    function loadQuestion() {
      if (currentIndex < quizList.length) {
        const q = quizList[currentIndex];
        document.getElementById("question").textContent = 
          `Q${currentIndex + 1}. "${q.korean}"`;
        document.getElementById("answer").value = "";
        document.getElementById("answer").focus();
        document.getElementById("result").textContent = "";

        // ğŸ”‘ ì—”í„° í‚¤ë¡œ ì œì¶œ ê°€ëŠ¥
        document.getElementById("answer").addEventListener("keyup", function handler(e) {
          if (e.key === "Enter") {
            checkAnswer();
            // ì´ë²¤íŠ¸ ì¤‘ë³µ ë°©ì§€: í•œ ë²ˆ ë“±ë¡ë˜ë©´ ì‚­ì œ
            document.getElementById("answer").removeEventListener("keyup", handler);
          }
        });
      } else {
        showResult();
      }
    }


    function checkAnswer() {
      const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
      const correctAnswer = quizList[currentIndex].english;

      if (userAnswer === correctAnswer) {
        document.getElementById("result").textContent = "âœ… ì •ë‹µì…ë‹ˆë‹¤!";
        score++;
      } else {
        document.getElementById("result").textContent = `âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µì€ "${correctAnswer}"ì…ë‹ˆë‹¤.`;
        wrongAnswers.push({
          korean: quizList[currentIndex].korean,
          correct: correctAnswer,
          yourAnswer: userAnswer || "(ë¬´ì‘ë‹µ)"
        });
      }

      currentIndex++;
      setTimeout(loadQuestion, 1500);
    }

    function showResult() {
      document.getElementById("quiz-section").classList.add("hidden");
      document.getElementById("result-section").classList.remove("hidden");

      document.getElementById("score").textContent = `ì •ë‹µ ê°œìˆ˜: ${score} / ${quizList.length}`;
      document.getElementById("wrongCount").textContent = `í‹€ë¦° ê°œìˆ˜: ${wrongAnswers.length}`;

      const ul = document.getElementById("wrongList");
      ul.innerHTML = "";
      wrongAnswers.forEach(item => {
        const li = document.createElement("li");
        li.textContent = `"${item.korean}" â†’ ë‹¹ì‹ ì˜ ë‹µ: "${item.yourAnswer}" / ì •ë‹µ: "${item.correct}"`;
        ul.appendChild(li);
      });
    }

    function restart() {
      document.getElementById("result-section").classList.add("hidden");
      document.getElementById("wordManager").classList.remove("hidden");
      document.getElementById("addBtn").classList.remove("hidden");
    }

    function toggleWordForm() {
      const form = document.getElementById("wordForm");
      form.classList.toggle("hidden");
    }


    // ì´ˆê¸° ë‹¨ì–´ ìˆ˜ ì—…ë°ì´íŠ¸
    updateWordCount();
  </script>

</body>
</html>
